<template name="userListEntry">
    <div class="main">
      {{> avatarViewer user=user showStatus=true}}
      <span class="js-profile">{{user.profile.name}}</span>
    </div>
    <div class="guild">
      <span class="js-guild">{{or guildName "-"}}</span>
    </div>
    <div class="zone">
      <span>{{zone}}</span>
    </div>
    <div class="actions">
      {{#each module in modules}}
        {{> Template.dynamic template=module}}
      {{/each}}
    </div>
    <div class="infos">
      {{#if admin}}
        <span title="Is admin">👑</span>
      {{else if levelOwner}}
        <span title="Is level owner">🗺️</span>
      {{else if canEditUserPermissions}}
        {{#if canEditLevel}}
          <span class="js-toggle-edition" title="Edition allowed">🔨</span>
        {{else}}
          <span class="js-toggle-edition denied" title="Click to allow edition">🔨</span>
        {{/if}}
      {{else if canEditLevel}}
        <span title="Can edit level">👷</span>
      {{/if}}

      {{#if canModerateUser}}
        <span class="js-kick-user" title="Click to kick">🦵</span>
      {{/if}}
    </div>
</template>

<template name="userList">
  {{#modal id="displayUserList" title=title}}
    <div class="user-list">
      <div class="tabs">
        <button type="button" class="button js-toggle-tab {{#unless activeTab "level"}}show{{/unless}}" data-tab="level">Level</button>
        <button type="button" class="button js-toggle-tab {{#unless activeTab "guild"}}show{{/unless}}" data-tab="guild">Team</button>
      </div>

      <ul class="users">
        {{#each user in users}}
          <li class="user">
            {{> userListEntry user=user level=level canEditUserPermissions=canEditUserPermissions canModerateLevel=canModerateLevel}}
          </li>
        {{/each}}
      </ul>

      {{#if activeTab "guild"}}
        {{#if canEditGuild}}
          <button type="button" class="button js-guild-add-users">+</button>
        {{/if}}
      {{/if}}
    </div>
  {{/modal}}
</template>
